// package sn.Fama_Taha.entity;

// import jakarta.persistence.Column;
// import jakarta.persistence.Entity;
// import jakarta.persistence.Id;
// import jakarta.persistence.Table;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;

// @Entity @Getter 
// @Setter @AllArgsConstructor @NoArgsConstructor 
// @Table(name = "Administrateurs")

// public class Administrateur {
//     @Id
//     @Column(name = "login",length = 50)
//     private String login;
//     @Column(name = "password", length = 100)
//     private String password;
//       public String getLogin() {
//         return login;
//     }
    
// }


// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;
// import java.time.LocalDate;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "emprunt")
// public class Emprunt {
//     @Id
//     @Column(name = "id_emprunt")
//     private String idEmprunt;

//     @Column(name = "date_emprunt", nullable = false)
//     private LocalDate dateEmprunt;

//     @Column(name = "date_retour_prevue", nullable = false)
//     private LocalDate dateRetourPrevue;

//     @Column(name = "date_retour_reelle")
//     private LocalDate dateRetourReelle;

//     @ManyToOne
//     @JoinColumn(name = "id_membre", nullable = false)
//     private Membre membre;

//     // Exemple : si vous avez une entité Livre
//     // @ManyToOne
//     // @JoinColumn(name = "id_livre", nullable = false)
//     // private Livre livre;
// }





// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "membre")
// public class Membre {
//     @Id
//     @Column(name = "id_membre")
//     private String idMembre;

//     @Column(name = "nom", length = 100, nullable = false)
//     private String nom;

//     @Column(name = "prenom", length = 100, nullable = false)
//     private String prenom;

//     @Column(name = "email", length = 100, nullable = false)
//     private String email;

//     private String telephone;
//     private String typeMembre;

//     @ManyToOne(fetch = FetchType.LAZY)
//     @JoinColumn(name = "createur_login")
//     private Administrateur createur;
// }


// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "ouvrage")
// public class Ouvrage {
//     @Id
//     @Column(name = "id_ouvrage")
//     private String idOuvrage;

//     @Column(name = "titre", nullable = false, length = 200)
//     private String titre;

//     @Column(name = "auteur", nullable = false, length = 100)
//     private String auteur;

//     @Column(name = "annee_publication")
//     private int anneePublication;

//     @Column(name = "genre", length = 50)
//     private String genre;

//     @Column(name = "disponible")
//     private boolean disponible;
// }


// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;
// import java.time.LocalDate;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "reservation")
// public class Reservation {
//     @Id
//     @Column(name = "id_reservation")
//     private String idReservation;

//     @Column(name = "date_reservation", nullable = false)
//     private LocalDate dateReservation;

//     @ManyToOne
//     @JoinColumn(name = "id_membre", nullable = false)
//     private Membre membre;

//     @ManyToOne
//     @JoinColumn(name = "id_ouvrage", nullable = false)
//     private Ouvrage ouvrage;
// }



// package sn.Fama_Taha.exception;


// public class AdministrateurNotFoundException extends Exception {

//     public AdministrateurNotFoundException() {
//         super(" login ou mot de passe incorrect");
//     }
//     public AdministrateurNotFoundException(String message) {
//         super(message);
//     }
// }
 




// package sn.Fama_Taha.exception;

// public class MembreNotFoundException extends Exception {
//     public MembreNotFoundException() {
//         super("Membre non trouvé");
//     }

//     public MembreNotFoundException(String message) {
//         super(message);
//     }
// }



// package sn.Fama_Taha.repository;

// import java.util.List;

// import sn.Fama_Taha.entity.Membre;

// public interface IMembreRepository {
//     List<Membre> findAll();
//     Membre findById(String idMembre);
//     Membre save(Membre membre);
//     void delete(Membre membre);
//     Membre update(Membre membre);
// }




// package sn.Fama_Taha.exception;

// public class ServeurException extends Exception {

//     public ServeurException() {
//         super("Erreur de connexion au serveur");
//     }

//     public ServeurException(String message) {
//         super(message);
//     }
// }







// package sn.Fama_Taha.repository;

// import org.hibernate.Session;
// import org.hibernate.Transaction;

// import sn.Fama_Taha.config.HibernateUtils;
// import sn.Fama_Taha.entity.Membre;
// import java.util.List;




// public class MembreRepository implements IMembreRepository {

//     @Override
//     public List<Membre> findAll() {
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             return session.createQuery("from Membre", Membre.class).getResultList();
//         } catch (Exception e) {
//             e.printStackTrace();
//             throw new RuntimeException("Erreur de recherche", e);
//         }
//     }

//     @Override
//     public Membre findById(String idMembre) {
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             return session.find(Membre.class, idMembre);
//         } catch (Exception e) {
//             e.printStackTrace();
//             throw new RuntimeException("Erreur de recherche", e);
//         }
//     }

//     @Override
//     public Membre save(Membre membre) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             session.persist(membre);
//             tx.commit();
//             return membre;
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de l'enregistrement", e);
//         }
//     }

//     @Override
//     public void delete(Membre membre) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             session.remove(membre);
//             tx.commit();
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de la suppression", e);
//         }
//     }

//     @Override
//     public Membre update(Membre membre) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             Membre updated = (Membre) session.merge(membre);
//             tx.commit();
//             return updated;
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de la mise à jour", e);
//         }
//     }
// }



// package sn.Fama_Taha.view;

// import javax.swing.*;
// import sn.Fama_Taha.exception.AdministrateurNotFoundException;
// import sn.Fama_Taha.entity.Administrateur;
// import sn.Fama_Taha.repository.AuthRepository;
// import java.awt.*;

// public class LoginView extends JFrame {
//     private JTextField loginField;
//     private JPasswordField passwordField;
//     private JButton loginButton;
//     private JLabel errorMessage;
//     private final AuthRepository authRepository = new AuthRepository();

//     public LoginView() {
//         setTitle("Connexion Administrateur");
//         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//         setSize(400, 300);
//         setLocationRelativeTo(null);
//         setResizable(false);

//         // Panel principal avec padding
//         JPanel mainPanel = new JPanel(new BorderLayout());
//         mainPanel.setBorder(BorderFactory.createEmptyBorder(30, 40, 30, 40));
//         mainPanel.setBackground(new Color(245, 245, 250));

//         // Titre
//         JLabel title = new JLabel("Connexion", SwingConstants.CENTER);
//         title.setFont(new Font("Arial", Font.BOLD, 22));
//         title.setForeground(new Color(44, 62, 80));
//         mainPanel.add(title, BorderLayout.NORTH);

//         // Formulaire
//         JPanel formPanel = new JPanel(new GridBagLayout());
//         formPanel.setOpaque(false);
//         GridBagConstraints gbc = new GridBagConstraints();
//         gbc.insets = new Insets(10, 10, 10, 10);
//         gbc.fill = GridBagConstraints.HORIZONTAL;

//         JLabel loginLabel = new JLabel("Login :");
//         loginLabel.setFont(new Font("Arial", Font.PLAIN, 15));
//         gbc.gridx = 0; gbc.gridy = 0;
//         formPanel.add(loginLabel, gbc);

//         loginField = new JTextField();
//         loginField.setFont(new Font("Arial", Font.PLAIN, 15));
//         gbc.gridx = 1; gbc.gridy = 0;
//         formPanel.add(loginField, gbc);

//         JLabel passwordLabel = new JLabel("Mot de passe :");
//         passwordLabel.setFont(new Font("Arial", Font.PLAIN, 15));
//         gbc.gridx = 0; gbc.gridy = 1;
//         formPanel.add(passwordLabel, gbc);

//         passwordField = new JPasswordField();
//         passwordField.setFont(new Font("Arial", Font.PLAIN, 15));
//         gbc.gridx = 1; gbc.gridy = 1;
//         formPanel.add(passwordField, gbc);

//         // Bouton Se connecter
//         loginButton = new JButton("Se connecter");
//         loginButton.setFont(new Font("Arial", Font.BOLD, 15));
//         loginButton.setBackground(new Color(52, 152, 219));
//         loginButton.setForeground(Color.WHITE);
//         loginButton.setFocusPainted(false);
//         loginButton.setCursor(new Cursor(Cursor.HAND_CURSOR));
//         loginButton.setBorder(BorderFactory.createEmptyBorder(8, 20, 8, 20));
//         gbc.gridx = 0; gbc.gridy = 2; gbc.gridwidth = 2;
//         formPanel.add(loginButton, gbc);

//         mainPanel.add(formPanel, BorderLayout.CENTER);

//         // Message d'erreur
//         errorMessage = new JLabel("", SwingConstants.CENTER);
//         errorMessage.setFont(new Font("Arial", Font.PLAIN, 13));
//         errorMessage.setForeground(Color.RED);
//         errorMessage.setVisible(false);
//         mainPanel.add(errorMessage, BorderLayout.SOUTH);

//         add(mainPanel);
//         setVisible(true);

//         loginButton.addActionListener(_ -> SeConnecter());
//     }

//    // ...existing code...
// private void SeConnecter() {
//     String login = loginField.getText();
//     String password = new String(passwordField.getPassword());
//     try {
//         Administrateur administrateur = authRepository.login(login, password);
//         errorMessage.setText("Bienvenue, " + administrateur.getLogin() + " !");
//         errorMessage.setForeground(new Color(39, 174, 96));
//         errorMessage.setVisible(true);

//         // Ouvrir la fenêtre principale et fermer la fenêtre de login
//         SwingUtilities.invokeLater(() -> {
//             new LayoutAvecMenuExemple(); // Affiche la fenêtre principale
//             this.dispose(); // Ferme la fenêtre de login
//         });

//     } catch (AdministrateurNotFoundException e) {
//         errorMessage.setText(e.getMessage());
//         errorMessage.setForeground(Color.RED);
//         errorMessage.setVisible(true);
//     } catch (Exception e) {
//         errorMessage.setText("Erreur technique : " + e.getMessage());
//         errorMessage.setForeground(Color.RED);
//         errorMessage.setVisible(true);
//     }
// }
// // ...existing code...
// }







// package sn.Fama_Taha.view;

// import sn.Fama_Taha.entity.Membre;
// import sn.Fama_Taha.repository.MembreRepository;

// import javax.swing.*;
// import javax.swing.table.*;
// import java.awt.*;
// import java.util.List;

// public class MembreView extends JPanel {
//     private JTable membreTable;
//     private DefaultTableModel tableModel;
//     private MembreRepository membreRepository = new MembreRepository();

//     public MembreView() {
//         setLayout(new BorderLayout());
//         setBackground(new Color(245, 245, 250));

//         // Colonnes du tableau
//         String[] columns = {"ID", "Nom", "Prénom", "Email", "Téléphone", "Type"};
//         tableModel = new DefaultTableModel(columns, 0) {
//             public boolean isCellEditable(int row, int column) { return false; }
//         };
//         membreTable = new JTable(tableModel);

//         // Style du tableau
//         membreTable.setFont(new Font("Segoe UI", Font.PLAIN, 15));
//         membreTable.setRowHeight(28);
//         membreTable.setSelectionBackground(new Color(102, 178, 255));
//         membreTable.setSelectionForeground(Color.BLACK);

//         // En-tête stylisé
//         JTableHeader header = membreTable.getTableHeader();
//         header.setBackground(new Color(44, 62, 80));
//         header.setForeground(Color.WHITE);
//         header.setFont(new Font("Segoe UI", Font.BOLD, 16));
//         ((DefaultTableCellRenderer)header.getDefaultRenderer()).setHorizontalAlignment(JLabel.CENTER);

//         // Rendu alterné des lignes
//         membreTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
//             @Override
//             public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
//                 Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
//                 if (!isSelected) {
//                     c.setBackground(row % 2 == 0 ? new Color(230, 240, 255) : Color.WHITE);
//                 }
//                 setHorizontalAlignment(CENTER);
//                 return c;
//             }
//         });

//         // Chargement des membres
//         loadMembres();

//         JScrollPane scrollPane = new JScrollPane(membreTable);
//         scrollPane.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));
//         add(scrollPane, BorderLayout.CENTER);

//         // Boutons stylisés
//         JButton addButton = createButton("Ajouter un membre", new Color(46, 204, 113));
//         JButton editButton = createButton("Modifier", new Color(241, 196, 15));
//         JButton deleteButton = createButton("Supprimer", new Color(231, 76, 60));

//         addButton.addActionListener(_ -> ajouterMembre());
//         editButton.addActionListener(_ -> modifierMembre());
//         deleteButton.addActionListener(_ -> supprimerMembre());

//         JPanel buttonPanel = new JPanel();
//         buttonPanel.setBackground(new Color(245, 245, 250));
//         buttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 0, 10, 0));
//         buttonPanel.add(addButton);
//         buttonPanel.add(editButton);
//         buttonPanel.add(deleteButton);
//         add(buttonPanel, BorderLayout.SOUTH);

//         // Titre
//         JLabel title = new JLabel("Gestion des Membres");
//         title.setFont(new Font("Segoe UI", Font.BOLD, 22));
//         title.setForeground(new Color(44, 62, 80));
//         title.setHorizontalAlignment(SwingConstants.CENTER);
//         title.setBorder(BorderFactory.createEmptyBorder(20, 0, 10, 0));
//         add(title, BorderLayout.NORTH);
//     }

//     private JButton createButton(String text, Color bg) {
//         JButton btn = new JButton(text);
//         btn.setFocusPainted(false);
//         btn.setBackground(bg);
//         btn.setForeground(Color.WHITE);
//         btn.setFont(new Font("Segoe UI", Font.BOLD, 15));
//         btn.setBorder(BorderFactory.createEmptyBorder(8, 18, 8, 18));
//         btn.setCursor(new Cursor(Cursor.HAND_CURSOR));
//         return btn;
//     }

//     private void loadMembres() {
//         tableModel.setRowCount(0); // Clear
//         List<Membre> membres = membreRepository.findAll();
//         for (Membre m : membres) {
//             tableModel.addRow(new Object[]{
//                 m.getIdMembre(),
//                 m.getNom(),
//                 m.getPrenom(),
//                 m.getEmail(),
//                 m.getTelephone(),
//                 m.getTypeMembre()
//             });
//         }
//     }

//     private void ajouterMembre() {
//         JOptionPane.showMessageDialog(this, "Fonctionnalité d'ajout à implémenter.");
//     }

//     private void modifierMembre() {
//         int selectedRow = membreTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un membre à modifier.");
//             return;
//         }
//         JOptionPane.showMessageDialog(this, "Fonctionnalité de modification à implémenter.");
//     }

//     private void supprimerMembre() {
//         int selectedRow = membreTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un membre à supprimer.");
//             return;
//         }
//         int confirm = JOptionPane.showConfirmDialog(this, "Voulez-vous vraiment supprimer ce membre ?", "Confirmation", JOptionPane.YES_NO_OPTION);
//         if (confirm == JOptionPane.YES_OPTION) {
//             Object idObj = tableModel.getValueAt(selectedRow, 0);
//             if (idObj != null) {
//                 Long id = Long.valueOf(idObj.toString());
//                 membreRepository.delete(membreRepository.findById(id.toString()));
//                 loadMembres();
//             }
//         }
//     }
// }







// package sn.Fama_Taha.view;
// import sn.Fama_Taha.entity.Ouvrage;
// import sn.Fama_Taha.repository.OuvrageRepository;
// import javax.swing.*;
// import javax.swing.table.DefaultTableCellRenderer;
// import javax.swing.table.DefaultTableModel;
// import java.awt.*;
// import java.util.List;

// public class OuvrageView extends JPanel {
//     private JTable ouvrageTable;
//     private DefaultTableModel tableModel;
//     private OuvrageRepository ouvrageRepository = new OuvrageRepository();

//     public OuvrageView() {
//         setLayout(new BorderLayout());
//         setBackground(new Color(245, 245, 250));

//         String[] columns = {"ID", "Titre", "Auteur", "Année", "Genre", "Disponible"};
//         tableModel = new DefaultTableModel(columns, 0) {
//             public boolean isCellEditable(int row, int column) {
//                 return false;
//             }
//         };
//         ouvrageTable = new JTable(tableModel);
//         ouvrageTable.setFont(new Font("Segoe UI", Font.PLAIN, 15));
//         ouvrageTable.setRowHeight(28);
//         ouvrageTable.setGridColor(new Color(220, 220, 220));
//         ouvrageTable.setSelectionBackground(new Color(102, 178, 255));
//         ouvrageTable.setSelectionForeground(Color.BLACK);

//         // En-tête du tableau stylisée
//         ouvrageTable.getTableHeader().setFont(new Font("Segoe UI", Font.BOLD, 16));
//         ouvrageTable.getTableHeader().setBackground(new Color(51, 102, 204));
//         ouvrageTable.getTableHeader().setForeground(Color.WHITE);

//         // Cellules alternées colorées
//         ouvrageTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
//             @Override
//             public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
//                 Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
//                 if (!isSelected) {
//                     c.setBackground(row % 2 == 0 ? new Color(235, 243, 255) : Color.WHITE);
//                 } else {
//                     c.setBackground(new Color(102, 178, 255));
//                 }
//                 return c;
//             }
//         });

//         loadOuvrages();

//         JScrollPane scrollPane = new JScrollPane(ouvrageTable);
//         scrollPane.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));
//         add(scrollPane, BorderLayout.CENTER);

//         JButton addButton = new JButton("Ajouter un ouvrage");
//         JButton editButton = new JButton("Modifier");
//         JButton deleteButton = new JButton("Supprimer");

//         // Style des boutons
//         Color btnColor = new Color(51, 102, 204);
//         Font btnFont = new Font("Segoe UI", Font.BOLD, 15);
//         for (JButton btn : new JButton[]{addButton, editButton, deleteButton}) {
//             btn.setBackground(btnColor);
//             btn.setForeground(Color.WHITE);
//             btn.setFocusPainted(false);
//             btn.setFont(btnFont);
//             btn.setBorder(BorderFactory.createEmptyBorder(8, 18, 8, 18));
//         }

//         addButton.addActionListener(_ -> ajouterOuvrage());
//         editButton.addActionListener(_ -> modifierOuvrage());
//         deleteButton.addActionListener(_ -> supprimerOuvrage());

//         JPanel buttonPanel = new JPanel();
//         buttonPanel.setBackground(new Color(245, 245, 250));
//         buttonPanel.setLayout(new FlowLayout(FlowLayout.CENTER, 20, 15));
//         buttonPanel.add(addButton);
//         buttonPanel.add(editButton);
//         buttonPanel.add(deleteButton);
//         add(buttonPanel, BorderLayout.SOUTH);

//         // Titre en haut
//         JLabel titre = new JLabel("Gestion des Ouvrages");
//         titre.setFont(new Font("Segoe UI", Font.BOLD, 22));
//         titre.setForeground(new Color(51, 102, 204));
//         titre.setBorder(BorderFactory.createEmptyBorder(15, 0, 10, 0));
//         titre.setHorizontalAlignment(SwingConstants.CENTER);
//         add(titre, BorderLayout.NORTH);
//     }

//     private void loadOuvrages() {
//         tableModel.setRowCount(0);
//         List<Ouvrage> ouvrages = ouvrageRepository.findAll();
//         for (Ouvrage o : ouvrages) {
//             tableModel.addRow(new Object[]{
//                 o.getIdOuvrage(),
//                 o.getTitre(),
//                 o.getAuteur(),
//                 o.getAnneePublication(),
//                 o.getGenre(),
//                 o.isDisponible() ? "Oui" : "Non"
//             });
//         }
//     }

//     private void ajouterOuvrage() {
//         JOptionPane.showMessageDialog(this, "Fonctionnalité d'ajout à implémenter.");
//     }

//     private void modifierOuvrage() {
//         int selectedRow = ouvrageTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un ouvrage à modifier.");
//             return;
//         }
//         JOptionPane.showMessageDialog(this, "Fonctionnalité de modification à implémenter.");
//     }

//     private void supprimerOuvrage() {
//         int selectedRow = ouvrageTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un ouvrage à supprimer.");
//             return;
//         }
//         int confirm = JOptionPane.showConfirmDialog(this, "Voulez-vous vraiment supprimer cet ouvrage ?", "Confirmation", JOptionPane.YES_NO_OPTION);
//         if (confirm == JOptionPane.YES_OPTION) {
//             Object idObj = tableModel.getValueAt(selectedRow, 0);
//             if (idObj != null) {
//                 ouvrageRepository.delete(ouvrageRepository.findById(idObj.toString()));
//                 loadOuvrages();
//             }
//         }
//     }
// }









// package sn.Fama_Taha.repository;

// import org.hibernate.Session;
// import org.hibernate.Transaction;
// import sn.Fama_Taha.config.HibernateUtils;
// import sn.Fama_Taha.entity.Ouvrage;
// import java.util.List;



// public class OuvrageRepository {

//     public List<Ouvrage> findAll() {
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             return session.createQuery("from Ouvrage", Ouvrage.class).getResultList();
//         } catch (Exception e) {
//             e.printStackTrace();
//             throw new RuntimeException("Erreur de recherche", e);
//         }
//     }

//     public Ouvrage findById(String idOuvrage) {
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             return session.find(Ouvrage.class, idOuvrage);
//         } catch (Exception e) {
//             e.printStackTrace();
//             throw new RuntimeException("Erreur de recherche", e);
//         }
//     }

//     public Ouvrage save(Ouvrage ouvrage) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             session.persist(ouvrage);
//             tx.commit();
//             return ouvrage;
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de l'enregistrement", e);
//         }
//     }

//     public void delete(Ouvrage ouvrage) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             session.remove(ouvrage);
//             tx.commit();
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de la suppression", e);
//         }
//     }

//     public Ouvrage update(Ouvrage ouvrage) {
//         Transaction tx = null;
//         try (Session session = HibernateUtils.getSessionFactory().openSession()) {
//             tx = session.beginTransaction();
//             Ouvrage updated = (Ouvrage) session.merge(ouvrage);
//             tx.commit();
//             return updated;
//         } catch (Exception e) {
//             if (tx != null) tx.rollback();
//             e.printStackTrace();
//             throw new RuntimeException("Erreur lors de la mise à jour", e);
//         }
//     }
// }





// package sn.Fama_Taha.view;

// import javax.swing.*;
// import java.awt.*;

// public class LayoutAvecMenuExemple extends JFrame {

//     public LayoutAvecMenuExemple() {
//         setTitle("Gestion de Bibliothèque");
//         setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
//         setSize(900, 650);
//         setLocationRelativeTo(null);

//         // Définir une police personnalisée
//         Font fontTitre = new Font("Segoe UI", Font.BOLD, 28);
//         Font fontMenu = new Font("Segoe UI", Font.PLAIN, 16);

//         // Barre de menu stylisée
//         JMenuBar menuBar = new JMenuBar();
//         menuBar.setBackground(new Color(44, 62, 80));
//         menuBar.setBorder(BorderFactory.createEmptyBorder(5, 10, 5, 10));

//         // Menu Membres
//         JMenu menuMembre = new JMenu("Membres");
//         menuMembre.setForeground(Color.WHITE);
//         menuMembre.setFont(fontMenu);
//         JMenuItem itemListerMembres = new JMenuItem("Lister les membres");
//         JMenuItem itemAjouterMembre = new JMenuItem("Ajouter un membre");
//         menuMembre.add(itemListerMembres);
//         menuMembre.add(itemAjouterMembre);

//         // Menu Ouvrages
//         JMenu menuOuvrage = new JMenu("Ouvrages");
//         menuOuvrage.setForeground(Color.WHITE);
//         menuOuvrage.setFont(fontMenu);
//         JMenuItem itemListerOuvrages = new JMenuItem("Lister les ouvrages");
//         JMenuItem itemAjouterOuvrage = new JMenuItem("Ajouter un ouvrage");
//         menuOuvrage.add(itemListerOuvrages);
//         menuOuvrage.add(itemAjouterOuvrage);

//         // Menu Emprunts
//         JMenu menuEmprunt = new JMenu("Emprunts");
//         menuEmprunt.setForeground(Color.WHITE);
//         menuEmprunt.setFont(fontMenu);
//         JMenuItem itemListerEmprunts = new JMenuItem("Lister les emprunts");
//         menuEmprunt.add(itemListerEmprunts);

//         // Menu Réservations
//         JMenu menuReservation = new JMenu("Réservations");
//         menuReservation.setForeground(Color.WHITE);
//         menuReservation.setFont(fontMenu);
//         JMenuItem itemListerReservations = new JMenuItem("Lister les réservations");
//         menuReservation.add(itemListerReservations);

//         // Ajout des menus à la barre
//         menuBar.add(menuMembre);
//         menuBar.add(menuOuvrage);
//         menuBar.add(menuEmprunt);
//         menuBar.add(menuReservation);

//         setJMenuBar(menuBar);

//         // Panel principal avec fond
//         JPanel mainPanel = new JPanel(new BorderLayout());
//         mainPanel.setBackground(new Color(236, 240, 241));
//         add(mainPanel);

//         // En-tête stylisé
//         JPanel headerPanel = new JPanel();
//         headerPanel.setBackground(new Color(52, 152, 219));
//         JLabel titre = new JLabel("Bienvenue dans la Gestion de Bibliothèque");
//         titre.setForeground(Color.WHITE);
//         titre.setFont(fontTitre);
//         headerPanel.add(titre);
//         mainPanel.add(headerPanel, BorderLayout.NORTH);

//         // Panel de contenu (pour changer selon le menu)
//         JPanel contentPanel = new JPanel(new BorderLayout());
//         contentPanel.setOpaque(false);
//         mainPanel.add(contentPanel, BorderLayout.CENTER);

//         // Actions des menus
//         itemListerMembres.addActionListener(_ -> {
//             contentPanel.removeAll();
//             contentPanel.add(new MembreView(), BorderLayout.CENTER);
//             contentPanel.revalidate();
//             contentPanel.repaint();
//         });
//         itemListerOuvrages.addActionListener(_ -> {
//             contentPanel.removeAll();
//             contentPanel.add(new OuvrageView(), BorderLayout.CENTER);
//             contentPanel.revalidate();
//             contentPanel.repaint();
//         });
//         // Ajoutez les autres actions ici...

//         // Message d'accueil par défaut
//         JLabel accueil = new JLabel("<html><center><h2>Bienvenue !</h2><br/>Sélectionnez une option dans le menu pour commencer.</center></html>", SwingConstants.CENTER);
//         accueil.setFont(new Font("Segoe UI", Font.PLAIN, 20));
//         accueil.setForeground(new Color(44, 62, 80));
//         contentPanel.add(accueil, BorderLayout.CENTER);

//         setVisible(true);
//     }
// }





// M002	Martin	Claire	Martin@emple.com	0987654321	Abonné
// M006	Thiam	Taha	taha@gmail.com	783232345	Etudiant
// M005	Ndiaye	Fama	Fama@gmail.com	6677889900	Etudiant
// M003	Faye	Amy	amy@example.com	1122334455	Etudiant
// M004	Ndiaye	Ndeye Khady	khady@exemple.com	5566778899	Etudiant
// 4567H	MAMA	MAMA	MAMM@KAKA.KK	67890	Prof


// O002	1984	George Orwell	1949	Dystopie	Oui
// O003	To Kill a Mockingbird	Harper Lee	1960	Fiction	Oui
// 0004	Vole de nuit	je sais pas	2003	romam	Oui
// 0005	Diné	Khady	2024	test	Non

// // inserer des emprunts dans la table emprunt
// intert into emprunt ("id_emprunt", "date_emprunt", "date_retour_prevue", "date_retour_reelle", "id_membre", "id_ouvrage") values
// ('E001', '2025-06-01', '2025-06-30', NULL, 'M002', 'O002'),
// ('E002', '2025-06-05', '2025-07-05', NULL, 'M006', 'O003'),
// ('E003', '2025-06-10', '2025-07-10', NULL, 'M005', '0004'),
// ('E004', '2025-06-15', '2025-07-15', NULL, 'M003', '0005'),
// ('E005', '2025-06-20', '2025-07-20', NULL, 'M004', 'O002');

// // inserer des amendes dans la table amende sachant que la date d'aujourd'hui est 2025-06-25
// insert into amende ("id_amende", "montant", "date_amende", "raison", "id_membre") values
// ('A001', 50.0, '2025-06-25', 'Retard de retour', 'M002'),
// ('A002', 30.0, '2025-06-25', 'Retard de retour', 'M006'),
// ('A003', 20.0, '2025-06-25', 'Retard de retour', 'M005'),
// ('A004', 40.0, '2025-06-25', 'Retard de retour', 'M003'),
// ('A005', 25.0, '2025-06-25', 'Retard de retour', 'M004');
















// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.*;
// import java.time.LocalDate;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "amende")
// public class Amende {
//     @Id
//     @Column(name = "id_amende")
//     private String idAmende;

//     @Column(name = "montant", nullable = false)
//     private double montant;

//     @Column(name = "date_amende", nullable = false)
//     private LocalDate dateAmende;

//     @Column(name = "raison")
//     private String raison;

//     @ManyToOne
//     @JoinColumn(name = "id_membre", nullable = false)
//     private Membre membre;
// }















// package sn.Fama_Taha.entity;

// import jakarta.persistence.*;
// import lombok.AllArgsConstructor;
// import lombok.Getter;
// import lombok.NoArgsConstructor;
// import lombok.Setter;
// import java.time.LocalDate;

// @Entity
// @Getter
// @Setter
// @NoArgsConstructor
// @AllArgsConstructor
// @Table(name = "emprunt")
// public class Emprunt {
//     @Id
//     @Column(name = "id_emprunt")
//     private String idEmprunt;

//     @Column(name = "date_emprunt", nullable = false)
//     private LocalDate dateEmprunt;

//     @Column(name = "date_retour_prevue", nullable = false)
//     private LocalDate dateRetourPrevue;

//     @Column(name = "date_retour_reelle")
//     private LocalDate dateRetourReelle;

//     @ManyToOne
//     @JoinColumn(name = "id_membre", nullable = false)
//     private Membre membre;

//     @ManyToOne
//     @JoinColumn(name = "id_ouvrage", nullable = false)
//     private Ouvrage ouvrage;

// }














// package sn.Fama_Taha.view;

// import sn.Fama_Taha.entity.Emprunt;
// import sn.Fama_Taha.repository.EmpruntRepository;
// import javax.swing.*;
// import javax.swing.table.*;
// import java.awt.*;
// import java.time.format.DateTimeFormatter;
// import java.util.List;




// public class EmpruntView extends JPanel {
//     private JTable empruntTable;
//     private DefaultTableModel tableModel;
//     private EmpruntRepository empruntRepository = new EmpruntRepository();

//     public EmpruntView() {
//         setLayout(new BorderLayout());
//         setBackground(new Color(245, 245, 250));

//         String[] columns = {"ID", "Date Emprunt", "Retour Prévue", "Retour Réelle", "Membre", "Ouvrage"};
//         tableModel = new DefaultTableModel(columns, 0) {
//             public boolean isCellEditable(int row, int column) { return false; }
//         };
//         empruntTable = new JTable(tableModel);

//         empruntTable.setFont(new Font("Segoe UI", Font.PLAIN, 15));
//         empruntTable.setRowHeight(28);
//         empruntTable.setSelectionBackground(new Color(102, 178, 255));
//         empruntTable.setSelectionForeground(Color.BLACK);

//         JTableHeader header = empruntTable.getTableHeader();
//         header.setBackground(new Color(44, 62, 80));
//         header.setForeground(Color.WHITE);
//         header.setFont(new Font("Segoe UI", Font.BOLD, 16));
//         ((DefaultTableCellRenderer)header.getDefaultRenderer()).setHorizontalAlignment(JLabel.CENTER);

//         empruntTable.setDefaultRenderer(Object.class, new DefaultTableCellRenderer() {
//             @Override
//             public Component getTableCellRendererComponent(JTable table, Object value, boolean isSelected, boolean hasFocus, int row, int column) {
//                 Component c = super.getTableCellRendererComponent(table, value, isSelected, hasFocus, row, column);
//                 if (!isSelected) {
//                     c.setBackground(row % 2 == 0 ? new Color(230, 240, 255) : Color.WHITE);
//                 }
//                 setHorizontalAlignment(CENTER);
//                 return c;
//             }
//         });

//         loadEmprunts();

//         JScrollPane scrollPane = new JScrollPane(empruntTable);
//         scrollPane.setBorder(BorderFactory.createEmptyBorder(15, 15, 15, 15));
//         add(scrollPane, BorderLayout.CENTER);

//         JButton addButton = createButton("Ajouter un emprunt", new Color(46, 204, 113));
//         JButton editButton = createButton("Modifier", new Color(241, 196, 15));
//         JButton deleteButton = createButton("Supprimer", new Color(231, 76, 60));

//         addButton.addActionListener(_ -> ajouterEmprunt());
//         editButton.addActionListener(_ -> modifierEmprunt());
//         deleteButton.addActionListener(_ -> supprimerEmprunt());

//         JPanel buttonPanel = new JPanel();
//         buttonPanel.setBackground(new Color(245, 245, 250));
//         buttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 0, 10, 0));
//         buttonPanel.add(addButton);
//         buttonPanel.add(editButton);
//         buttonPanel.add(deleteButton);
//         add(buttonPanel, BorderLayout.SOUTH);

//         JLabel title = new JLabel("Gestion des Emprunts");
//         title.setFont(new Font("Segoe UI", Font.BOLD, 22));
//         title.setForeground(new Color(44, 62, 80));
//         title.setHorizontalAlignment(SwingConstants.CENTER);
//         title.setBorder(BorderFactory.createEmptyBorder(20, 0, 10, 0));
//         add(title, BorderLayout.NORTH);
//     }

//     private JButton createButton(String text, Color bg) {
//         JButton btn = new JButton(text);
//         btn.setFocusPainted(false);
//         btn.setBackground(bg);
//         btn.setForeground(Color.WHITE);
//         btn.setFont(new Font("Segoe UI", Font.BOLD, 15));
//         btn.setBorder(BorderFactory.createEmptyBorder(8, 18, 8, 18));
//         btn.setCursor(new Cursor(Cursor.HAND_CURSOR));
//         return btn;
//     }

//     private void loadEmprunts() {
//         tableModel.setRowCount(0);
//         List<Emprunt> emprunts = empruntRepository.findAll();
//         DateTimeFormatter fmt = DateTimeFormatter.ofPattern("yyyy-MM-dd");
//         for (Emprunt e : emprunts) {
//             tableModel.addRow(new Object[]{
//                 e.getIdEmprunt(),
//                 e.getDateEmprunt() != null ? e.getDateEmprunt().format(fmt) : "",
//                 e.getDateRetourPrevue() != null ? e.getDateRetourPrevue().format(fmt) : "",
//                 e.getDateRetourReelle() != null ? e.getDateRetourReelle().format(fmt) : "",
//                 e.getMembre() != null ? e.getMembre().getNom() + " " + e.getMembre().getPrenom() : "",
//                 e.getOuvrage() != null ? e.getOuvrage().getTitre() : ""
//             });
//         }
//     }

//     private void ajouterEmprunt() {
//         JOptionPane.showMessageDialog(this, "Fonctionnalité d'ajout à implémenter.");
//     }

//     private void modifierEmprunt() {
//         int selectedRow = empruntTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un emprunt à modifier.");
//             return;
//         }
//         JOptionPane.showMessageDialog(this, "Fonctionnalité de modification à implémenter.");
//     }

//     private void supprimerEmprunt() {
//         int selectedRow = empruntTable.getSelectedRow();
//         if (selectedRow == -1) {
//             JOptionPane.showMessageDialog(this, "Veuillez sélectionner un emprunt à supprimer.");
//             return;
//         }
//         int confirm = JOptionPane.showConfirmDialog(this, "Voulez-vous vraiment supprimer cet emprunt ?", "Confirmation", JOptionPane.YES_NO_OPTION);
//         if (confirm == JOptionPane.YES_OPTION) {
//             Object idObj = tableModel.getValueAt(selectedRow, 0);
//             if (idObj != null) {
//                 empruntRepository.delete(empruntRepository.findById(idObj.toString()));
//                 loadEmprunts();
//             }
//         }
//     }
// }
